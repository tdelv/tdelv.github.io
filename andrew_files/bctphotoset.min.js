/*!
    --------------------------------
    PXU Photoset Extended
    --------------------------------
    + https://github.com/PixelUnion/Extended-Tumblr-Photoset
    + http://pixelunion.net
    + Version 1.8.0a
    + Copyright 2013 Pixel Union
    + Modified 2017 By Chloe Themes : http://bychloethemes.tumblr.com
    + Licensed under the MIT license
*/
!function(a){a.fn.pxuPhotoset=function(b,c){var d={lightbox:!0,highRes:!0,rounded:"corners",borderRadius:"5px",gutter:"10px",photoset:".photo-slideshow",photoWrap:".photo-data",photo:".pxu-photo"},e=a.extend(d,b);if(e.lightbox){a(".tumblr-box").on("click",function(b){b.preventDefault();var c=a(this),d=c.parents(e.photoset).attr("id");f(c,d)});var f=function(b,c){var d=b.parents(e.photoWrap).find(e.photo+" img").data("count"),f=[];a("#"+c).find(e.photoWrap).each(function(){var b=a(this).find(e.photo+" img"),c=b.data("width"),d=b.data("height"),g=b.attr("src"),h=b.data("highres"),i={width:c,height:d,low_res:g,high_res:h};f.push(i)}),Tumblr.Lightbox.init(f,d)}}return a(e.photoWrap).on("mouseenter",function(){a(this).find(".icons").css("visibility","visible")}).on("mouseleave",function(){a(this).find(".icons").css("visibility","hidden")}),a("span.info").on("mouseenter",function(){var b=a(this),c=b.children(".pxu-data");c.css("display","block").stop(!0,!1).animate({opacity:1},200)}),a("span.info").on("mouseleave",function(){var b=a(this),c=b.children(".pxu-data");c.stop(!0,!1).animate({opacity:0},200,function(){a(this).css("display","none")})}),this.each(function(){function q(b){for(var f,g,h,i,j,c=b.find(".row"),d=c.length,k=0;k<d;k++)if(currentRow=c.eq(k),images=currentRow.find(e.photoWrap+" img"),photoCount=images.length,photoCount>1){var l=currentRow.find(e.photo+" img").map(function(){return f=a(this),g=f.data("width"),h=f.data("height"),i=f.parent().width(),j=i/g*h,f.data("new-height",j),j}).get(),m=Array.min(l);for(currentRow.height(m-1).find(e.photo).height(m-1),o=0;o<photoCount;o++){var n=images.eq(o),p=n.data("new-height"),q=m;if(p>q){var r=(p-q)/2;n.css("margin-top",-r)}}}}var b=a(this),d=b.data("layout"),f=JSON.stringify(d).split(""),g=f.length,h=b.find(e.photo+" img");for(o=0;o<h.length;o++){var i=h.eq(o);i.attr("data-count",o+1)}var j=[];for(o=1;o<=g;++o){for(var k=0,l=0;l<o;++l){var m=parseInt(f[l],10);k+=m}var n=parseInt(f[o-1],10);j[o]=Array(o,n,k)}for(var o=1;o<=g;o++){var p;p=1===o?0:j[o-1][2],b.find(e.photoWrap).slice(p,j[o][2]).addClass("count-"+j[o][1]).wrapAll('<div class="row clearit" />')}if(e.gutter&&(a(this).find(".row").css("margin-bottom",e.gutter),a(this).find(".count-3").css("width","calc((100% - "+e.gutter+" * 2) / 3)"),a(this).find(".count-2").css("width","calc((100% - "+e.gutter+") / 2)"),a(this).find(e.photoWrap+":not(:first-child)").css("margin-left",e.gutter)),Array.min=function(a){return Math.min.apply(Math,a)},q(b),a(window).resize(function(){q(b)}),e.highRes&&b.find(e.photoWrap).each(function(){var b=a(this).find(e.photo+" img"),c=b.data("highres");b.attr("src",c)}),"corners"==e.rounded){var r=b.find(".row");if(1==g)r.find(e.photoWrap+":first-child "+e.photo).css({borderRadius:e.borderRadius+" 0 0 "+e.borderRadius}),r.find(e.photoWrap+":last-child "+e.photo).css({borderRadius:"0 "+e.borderRadius+" "+e.borderRadius+" 0"});else for(var s=0;s<g;s++){var t;0===s&&(t=r.eq(s).find(e.photo).size(),1==t?r.eq(s).find(e.photo).css({borderRadius:e.borderRadius+" "+e.borderRadius+" 0 0"}):(r.eq(s).find(e.photoWrap+":first-child "+e.photo).css({borderRadius:e.borderRadius+" 0 0 0"}),r.eq(s).find(e.photoWrap+":last-child "+e.photo).css({borderRadius:"0 "+e.borderRadius+" 0 0"}))),s==g-1&&(t=r.eq(s).find(e.photo).size(),1==t?r.eq(s).find(e.photo).css({borderRadius:"0 0 "+e.borderRadius+" "+e.borderRadius}):(r.eq(s).find(e.photoWrap+":first-child "+e.photo).css({borderRadius:"0 0 0 "+e.borderRadius}),r.eq(s).find(e.photoWrap+":last-child "+e.photo).css({borderRadius:"0 0 "+e.borderRadius+" 0"})))}}"all"==e.rounded&&b.find(e.photo).css({borderRadius:e.borderRadius}),e.rounded||b.find(e.photo).css({borderRadius:0}),b.addClass("processed"),"function"==typeof c&&c.call(this)})}}(jQuery);